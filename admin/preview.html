<!-- admin/preview.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Post Preview</title>
  <link rel="stylesheet" href="/assets/css/style.css" />
</head>
<body>
  <div id="preview-content"></div>
  
  <!-- Include a Markdown parser, e.g., Marked -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    // The CMS will pass in the entry data via a global variable.
    // For example, if using Netlify CMS preview templates, you might receive a variable like 'entry'.
    // Here, we simulate reading the preview data from URL params (or however your setup is designed).
    function getQueryParams() {
      const params = {};
      window.location.search.substring(1).split("&").forEach(pair => {
        const [key, value] = pair.split("=");
        params[decodeURIComponent(key)] = decodeURIComponent(value || '');
      });
      return params;
    }
    const params = getQueryParams();
    
    // Example: Render the content from the URL parameters (this is a simple example)
    const previewContent = document.getElementById("preview-content");
    const title = params.title || "No Title";
    const featuredImage = params.featured_image || "";
    const body = params.body || "";

    previewContent.innerHTML = `
      <h1>${title}</h1>
      ${featuredImage ? `<img src="${featuredImage}" alt="Featured Image" />` : ""}
      <div>${marked.parse(body)}</div>
    `;
  </script>
</body>
</html>
